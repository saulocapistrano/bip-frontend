<div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-3">
  <h2 class="h5 mb-0">Usuários pendentes de aprovação</h2>

  <div class="d-flex align-items-center gap-2">
    <label for="pending-role" class="form-label mb-0 text-muted">Perfil</label>
    <select
      id="pending-role"
      class="form-select form-select-sm"
      [value]="selectedRole"
      (change)="onRoleChange($any($event.target).value)"
    >
      <option value="BIP_CLIENTE">Cliente</option>
      <option value="BIP_ENTREGADOR">Entregador</option>
    </select>
  </div>
</div>

<div class="card border-0 shadow-sm">
  <div class="card-body p-0">
    <ng-container *ngIf="(users$ | async) as users">
      <div
        *ngIf="users.length === 0"
        class="p-3 text-muted"
      >
        Nenhum usuário pendente encontrado para o perfil selecionado.
      </div>

      <table
        *ngIf="users.length > 0"
        class="table mb-0 table-hover align-middle"
      >
        <thead class="table-light">
          <tr>
            <th>Nome</th>
            <th>Email</th>
            <th>Perfil</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of users">
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.role }}</td>
            <td>{{ user.status }}</td>
            <td class="text-nowrap">
              <button
                type="button"
                class="btn btn-sm btn-success me-2"
                (click)="approve(user)"
              >
                Aprovar
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-danger"
                (click)="reject(user)"
              >
                Rejeitar
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </ng-container>
  </div>
</div>
